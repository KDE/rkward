<!DOCTYPE rkplugin>
<document>
	<code file="crosstab.php"/>
	<logic>
		<connect client="chi_options.enabled" governor="chisq.state" />
		<connect client="barplot_options.enabled" governor="barplot.state" />
		<connect client="preview.enabled" governor="barplot.state"/>
		<set id="barplot_embed.xvar" to="results[[i]]"/>

		<convert id="montevalue" mode="equals" sources="monte.string" standard="TRUE" />
		<connect client="B.enabled" governor="montevalue" />
	</logic>
	<dialog label="Crosstabs" >
		<tabbook>
			<tab label="Variables" id="variables_tab">
				<row>
					<varselector id="vars"/>
					<column>
						<varslot multi="false" id="x" source="vars" label="Dependent" required="true" />
						<varslot min_vars="1" multi="true" id="y" source="vars" required="true" label="Independent"/>
						<checkbox id="chisq" label="Chisquare" value="TRUE" value_unchecked="FALSE" checked="false" />
						<checkbox id="barplot" label="Draw Barplot" value="TRUE" value_unchecked="FALSE" checked="false" />
						<preview id="preview" label="Preview (for barplot)"/>
						<stretch/>
					</column>
				</row>
			</tab>
			<tab label="Chisquare Options" id="chi_options">
				<checkbox id="simpv" label="Simulate p value" value="TRUE" value_unchecked="FALSE" checked="false" />
				<radio id="monte" label="Method">
					<option value="FALSE" label="Asymptotic"  checked="true" />
					<option value="TRUE" label="Monte Carlo" />
				</radio>
				<frame label="Number of replicates">
					<input id="B" initial="10000" label="Number of replicates used in the Monte Carlo Method" />
				</frame>
				<stretch/>
			</tab>
			<tab label="Barplot Options" id="barplot_options">
				<embed id="barplot_embed" component="rkward::barplot_embed"/>
			</tab>
		</tabbook>
	</dialog>

</document>
