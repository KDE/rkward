<!DOCTYPE rkplugin>
<document>
	<code file="density_plot.php" />
	<logic>
		<connect client="plotoptions.xvar" governor="x.available"/>
		<set id="plotoptions.allow_log" to="false"/>
		<set id="plotoptions.allow_type" to="false"/>

		<convert id="regular_density_plot" mode="equals" sources="plot_type.string" standard="density_plot"/>
		<connect client="kern.enabled" governor="regular_density_plot"/>
		<convert id="gaussian_kernel" mode="equals" sources="kern.string" standard="gaussian"/>
		<convert id="bw_type_enabled" mode="and" sources="kern.enabled;gaussian_kernel"/>
		<connect client="bw.enabled" governor="bw_type_enabled"/>
		<connect client="adjust.enabled" governor="regular_density_plot"/>
		<connect client="narm.enabled" governor="regular_density_plot"/>
		<connect client="n.enabled" governor="regular_density_plot"/>

		<connect client="rug_ticksize.enabled" governor="rug.state"/>
		<connect client="rug_lwd.enabled" governor="rug.state"/>
		<connect client="rug_side.enabled" governor="rug.state"/>
		<connect client="rug_col.enabled" governor="rug.state"/>
	</logic>
	<dialog label="Density Plot" >
		<tabbook>
			<tab label="Variable(s)" >
				<row>
					<varselector id="vars" />
					<column>
						<varslot multi="false" type="numeric" id="x" source="vars" label="variable(s):" required="true" />
						<stretch/>
						<preview id="preview"/>
					</column>
				</row>
			</tab>
			<tab label="Options" >
				<row>
					<column>
						<radio id="plot_type" label="type of plot">
							<option value="density_plot" checked="true" label="plot normal density"/>
							<option value="hdr_plot" label="plot highest density regions"/>
						</radio>
						<frame id="normal_density_opts" label="density estimation options">
							<row>
								<column>
									<dropdown id="kern" label="Smoothing Kernel">
										<option value="gaussian" label="gaussian (default)"/>
										<option value="rectangular" label="rectangular"/>
										<option value="triangular" label="triangular"/>
										<option value="epanechnikov" label="epanechnikov"/>
										<option value="biweight" label="biweight"/>
										<option value="cosine" label="cosine"/>
										<option value="optcosine" label="optcosine"/>
									</dropdown>
									<dropdown id="bw" label="Bandwidth">
										<option value="nrd0" label="nrd0"/>
										<option value="nrd" label="nrd"/>
										<option value="ucv" label="ucv"/>
										<option value="bcv" label="bcv"/>
										<option value="SJ-ste" label="SJ-ste"/>
										<option value="SJ-dpi" label="SJ-dpi"/>
									</dropdown>
									<spinbox type="real" id="adjust" label="Adjust Bandwidth" initial="1"/>
									<stretch/>
								</column>
								<column>
									<checkbox id="narm" label="Remove Missing Values" value="na.rm=TRUE" value_unchecked="na.rm=FALSE" checked="true"/>
									<spinbox id="n" initial="512" label="Resolution" />
									<stretch/>
								</column>
							</row>
						</frame>
					</column>
					<column>
						<frame label="Rug">
							<checkbox value_unchecked="0" value="1" checked="false" id="rug" label="Add rug" />
							<spinbox initial="0.03" id="rug_ticksize" label="Ticksize" />
							<spinbox initial="0.5" id="rug_lwd" label="Line width of ticks" />
							<radio label="Side of Rug" id="rug_side">
								<option value="side = 1" label="Rug on Bottom" />
								<option value="side = 3" label="Rug on Top" />
							</radio>
							<embed id="rug_col" component="rkward::color_chooser" label="Color"/>
							<stretch/>
						</frame>
					</column>
				</row>
			</tab>
			<tab label="Axis/Title">
				<row>
					<embed id="plotoptions" component="rkward::plot_options" as_button="false" label="Plot Options" />
					<stretch/>
				</row>
			</tab>
		</tabbook>
	</dialog>
</document>
