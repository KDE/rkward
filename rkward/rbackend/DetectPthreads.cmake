INCLUDE(CheckIncludeFile)
INCLUDE(CheckFunctionExists)

CHECK_INCLUDE_FILE(phthread_np.h HAVE_PTHREAD_NP_H)

SET (CMAKE_REQUIRED_FLAGS ${CMAKE_THREAD_LIBS_INIT})
CHECK_FUNCTION_EXISTS (pthread_getattr_np HAVE_PTHREAD_GETATTR_NP)
CHECK_FUNCTION_EXISTS (pthread_attr_get_np HAVE_PTHREAD_ATTR_GET_NP)
CHECK_FUNCTION_EXISTS (pthread_get_stacksize_np HAVE_PTHREAD_GET_STACKSIZE_NP)
CHECK_FUNCTION_EXISTS (pthread_get_stackaddr_np HAVE_PTHREAD_GET_STACKADDR_NP)

CONFIGURE_FILE(pthread_config.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/pthread_config.h)